# ألوميتال برو 🏗️

موقع إلكتروني متكامل لعرض وبيع منتجات الألوميتال باستخدام Next.js و Supabase.

## 🚀 المميزات الرئيسية

### ✅ الميزات المكتملة
- **الصفحة الرئيسية**: عرض المنتجات المميزة، فيديو المقدمة، إحصائيات الشركة
- **متجر إلكتروني**: عرض جميع المنتجات مع فلترة حسب الفئة والسعر والبحث
- **تفاصيل المنتج**: صفحة تفاصيل كاملة مع معرض صور ومواصفات ومنتجات مشابهة
- **سلة التسوق**: إضافة/حذف/تعديل المنتجات في السلة مع حفظ في المتصفح
- **نظام الطلبات**: إتمام الطلبات وحفظها في قاعدة البيانات
- **نظام المستخدمين**: تسجيل دخول، إنشاء حساب، تسجيل خروج مع Supabase Auth
- **لوحة التحكم**: لوحة تحكم كاملة للمدير (إدارة المنتجات، الطلبات، الإعدادات)
- **إعدادات الموقع**: تخصيص جميع إعدادات الموقع مع حفظ في قاعدة البيانات
- **رفع الملفات**: رفع الصور والفيديوهات إلى Supabase Storage
- **تصميم متجاوب**: يعمل على جميع الأجهزة (كمبيوتر، تابلت، موبايل)

## 🔧 حل مشكلة عدم ظهور التغييرات

### 🚨 **المشكلة المكتشفة:**
التعديلات في لوحة التحكم بتحفظ في قاعدة البيانات، لكن مش بتظهر في الصفحة الرئيسية.

### ✅ **الحل المطبق:**
تم إصلاح معالجة البيانات في `hooks/useSiteSettings.ts` بحيث:
1. يتعامل مع البيانات من Supabase بشكل صحيح
2. يحول البيانات للتنسيق المناسب لـ React
3. يدعم الـ Realtime updates

## 🛠️ التشغيل والتطوير

### متطلبات النظام
- Node.js 18+
- npm أو yarn
- حساب Supabase

### خطوات التشغيل

1. **تثبيت التبعيات:**
```bash
npm install
```

2. **إعداد متغيرات البيئة:**
انسخ ملف `.env.local.example` إلى `.env.local` وقم بتعديل القيم:
```bash
cp .env.local.example .env.local
```

3. **تشغيل المشروع:**
```bash
npm run dev
```

4. **فتح المتصفح:**
افتح `http://localhost:3000`

### إعداد Supabase

1. **إنشاء حساب Supabase:**
- اذهب إلى [supabase.com](https://supabase.com)
- أنشئ مشروع جديد

2. **الحصول على البيانات:**
- من لوحة التحكم، اذهب إلى Settings > API
- انسخ `SUPABASE_URL` و `SUPABASE_ANON_KEY` و `SERVICE_ROLE_KEY`

3. **إعداد قاعدة البيانات:**
- نفذ ملف `SETUP_DATABASE.md` في SQL Editor

4. **إعداد التخزين:**
- نفذ ملف `SUPABASE_STORAGE_SETUP.md` لإنشاء Buckets

## 🔧 استكشاف الأخطاء وحل المشاكل

### مشكلة: التغييرات مش بتظهر في الصفحة الرئيسية
**الحل:**
1. احذف localStorage من المتصفح (F12 > Application > Local Storage)
2. أعد تحميل الصفحة
3. تأكد من أن البيانات محفوظة في Supabase

### مشكلة: رسالة "فشل رفع الصورة"
**الحل:**
1. اذهب إلى Storage في Supabase
2. أنشئ Buckets: `images`, `logos`, `products`, `pages`, `videos`
3. نفذ البوليسيز من ملف `SUPABASE_STORAGE_SETUP.md`

### مشكلة: الصفحة بتعمل بس مش بتحفظ
**الحل:**
1. تأكد من تسجيل الدخول في لوحة التحكم
2. تأكد من أن لديك صلاحيات المدير
3. فحص Console في المتصفح للأخطاء

## 📊 قاعدة البيانات

### الجداول الرئيسية
- **profiles**: بيانات المستخدمين
- **products**: المنتجات (مطابخ، أبواب، شبابيك)
- **orders**: الطلبات
- **reviews**: المراجعات
- **contact_messages**: رسائل التواصل
- **faq**: الأسئلة الشائعة
- **site_settings**: إعدادات الموقع

## 🔧 الأوامر المتاحة

```bash
# تشغيل المطور
npm run dev

# بناء المشروع للإنتاج
npm run build

# تشغيل نسخة الإنتاج
npm run start

# فحص الكود
npm run lint
```

## 📱 المميزات المتقدمة

### نظام الملفات
- رفع الصور إلى Supabase Storage
- دعم الفيديوهات
- أحجام مختلفة للصور
- حذف الملفات القديمة

### إعدادات الموقع
- تخصيص الألوان
- تحديث معلومات التواصل
- إدارة السوشيال ميديا
- تحديث اللوجو والشعار

### لوحة التحكم
- إدارة المنتجات (إضافة/تعديل/حذف)
- عرض الطلبات وتغيير حالاتها
- إدارة المراجعات
- تخصيص إعدادات الموقع

## 🔐 الأمان

- مصادقة Supabase مع JWT
- حماية المسارات المحمية
- تشفير كلمات المرور
- حماية من CSRF

## 🚀 النشر

### متطلبات النشر
- حساب Vercel أو Netlify
- متغيرات البيئة مضبوطة
- قاعدة البيانات جاهزة

### خطوات النشر على Vercel
1. اربط مستودع GitHub بـ Vercel
2. أضف متغيرات البيئة في لوحة التحكم
3. انشر تلقائياً مع كل push

## 📚 التوثيق

- [`SETUP_DATABASE.md`](SETUP_DATABASE.md) - إعداد قاعدة البيانات
- [`SUPABASE_STORAGE_SETUP.md`](SUPABASE_STORAGE_SETUP.md) - إعداد التخزين

## 🐛 استكشاف الأخطاء

### مشكلة: "Objects are not valid as a React child"
**الحل**: تأكد من أن جميع القيم في إعدادات الموقع من نوع string وليست object

### مشكلة: الصور لا تظهر بعد الرفع
**الحل**: تأكد من إعداد Supabase Storage والبوليسيز بشكل صحيح

### مشكلة: الإعدادات لا تحفظ في قاعدة البيانات
**الحل**: تأكد من أن المستخدم مسجل الدخول وله صلاحيات المدير

## 🚧 التطوير المستقبلي

- [ ] نظام الدفع الإلكتروني
- [ ] تطبيق موبايل (PWA)
- [ ] نظام التقييمات والمراجعات
- [ ] قائمة الرغبات
- [ ] مقارنة المنتجات
- [ ] تحسين SEO
- [ ] نظام التنبيهات
- [ ] تقارير المبيعات

## 📄 الترخيص

هذا المشروع تعليمي ومفتوح المصدر.

## 👨‍💻 المطور

تم التطوير بواسطة Cascade AI

---

**استمتع باستخدام الموقع! 🎉**
